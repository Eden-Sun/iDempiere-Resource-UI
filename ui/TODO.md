# iDempiere Resource UI - 開發進度追蹤

> 最後更新：2026-01-14

## 進度總覽

| 模組 | 進度 | 狀態 |
|------|------|------|
| 登入功能 | 60% | 🔄 進行中 |
| A. 業務夥伴 | 0% | ⏳ 待開發 |
| B. 諮詢單 | 0% | ⏳ 待開發 |
| C. 預約單 | 70% | 🔄 進行中 |
| D. 銷售訂單 | 0% | ⏳ 待開發 |
| E. 療程單 | 0% | ⏳ 待開發 |
| F. 付款單 | 0% | ⏳ 待開發 |
| G. 採購訂單 | 0% | ⏳ 待開發 |
| H. 收貨單 | 0% | ⏳ 待開發 |
| I. 報表 | 0% | ⏳ 待開發 |

---

## 1. 登入功能

### 1.1 基礎登入流程
- [x] 帳號密碼輸入介面
- [x] 呼叫 iDempiere REST API 取得 Token
- [x] Tenant 選擇
- [x] Role 選擇
- [x] Organization 選擇
- [x] Warehouse 選擇（可選）
- [x] 語系設定（預設中文 zh_TW）
- [x] 登入後導向主頁面

### 1.2 權限系統
- [ ] System / User 兩種權限區分
- [ ] 權限判斷邏輯實作
- [ ] 權限儲存機制

### 1.3 System 權限功能
- [ ] 設定 Tenant->Org 下 User 可見欄位
- [ ] 每個 table 的欄位可見性設定 UI
- [ ] 欄位可見性設定 API
- [ ] 未設定欄位預設 public 邏輯

### 1.4 選單權限管理
- [ ] 固定選單清單定義
- [ ] 選單權限設定 UI（System 專用）
- [ ] 帳號與選單對應關係管理
- [ ] 未設定 = 全不開放 邏輯實作
- [ ] 根據權限動態顯示選單

---

## 2. 選單功能

### A. 業務夥伴（C_BPartner）

#### A.1 主檔管理
- [ ] 業務夥伴列表頁面
- [ ] 新增業務夥伴表單
- [ ] 編輯業務夥伴
- [ ] 刪除業務夥伴
- [ ] 業務夥伴類型區分（客戶/員工/供應商）

#### A.2 關聯資料建立
- [ ] Contact (User) 關聯表建立流程
- [ ] Location 關聯表建立流程
- [ ] 建立順序優化（表頭 → Contact → Location）
- [ ] 流暢度優化（一站式建立體驗）

---

### B. 諮詢單（R_Request）

#### B.1 基礎功能
- [ ] 諮詢單列表頁面
- [ ] 新增諮詢單
- [ ] 編輯諮詢單
- [ ] 諮詢單詳情頁

#### B.2 待接應功能
- [ ] 列出未開諮詢單的客人
- [ ] 「待接應」分類篩選
- [ ] 待接應客人快速開單

#### B.3 搜尋與篩選
- [ ] Request Type 篩選
- [ ] Status 篩選
- [ ] 預設篩選條件設定

#### B.4 我的客戶
- [ ] 當前登入使用者的客戶諮詢單列表
- [ ] 快速切換檢視

#### B.5 客戶維度查詢
- [ ] 依客戶查詢所有相關諮詢單
- [ ] 客戶諮詢歷史記錄

#### B.6 員工統計
- [ ] 員工諮詢單數量統計
- [ ] 依類型分類統計
- [ ] 依狀態分類統計

#### B.7 甘特圖追蹤
- [ ] Start/Close Date 欄位支援
- [ ] 甘特圖視圖
- [ ] Task 追蹤功能

---

### C. 預約單（S_Resource / S_ResourceAssignment）

#### C.1 資源管理（System）
- [x] 資源列表（諮詢室/醫師/手術室）
- [x] 資源類型設定（S_ResourceType）
- [x] 營業時段設定（TimeSlotStart/End）
- [x] 營業日設定（OnMonday~OnSunday）
- [ ] 資源預設色標設定（System）
- [x] 30分鐘區間顯示

#### C.2 行事曆功能
- [x] 週檢視行事曆
- [x] Time slot 顯示
- [x] 依資源開放時間顯示
- [x] 多資源疊加顯示
- [x] 資源顏色區分

#### C.3 預約功能（User）
- [x] 直接點擊日曆選擇時段
- [x] 開始/結束時間選擇
- [x] Hover 預覽時長顯示
- [x] 過去時段禁止選擇（disabled 樣式）
- [x] Cursor 指示（cell/not-allowed）
- [x] 多資源同時預約
- [ ] 各別資源預約時間獨立修改
- [ ] 額外欄位填寫（System 可關閉）
- [x] 預約色標選擇
- [x] 預約確認 Popup

#### C.4 預約編輯
- [x] 點擊預約開啟編輯
- [x] 修改預約名稱
- [x] 修改預約色標
- [x] 刪除預約
- [ ] 修改預約時間

#### C.5 管理員功能
- [x] 管理行事曆頁面
- [x] 快速預約功能
- [x] 時長選擇器
- [ ] 預約匯出功能

---

### D. 銷售訂單（C_Order）

#### D.1 開單流程
- [ ] 銷售訂單列表頁面
- [ ] 選擇客戶
- [ ] 選擇商品
- [ ] 確認數量
- [ ] 確認金額
- [ ] 完成開單

#### D.2 訂單追蹤
- [ ] 未完成交付訂單列表
- [ ] 交貨狀態追蹤
- [ ] 療程單狀態追蹤

---

### E. 療程單（M_Production）

#### E.1 銷售訂單轉療程
- [ ] 待轉療程單列表
- [ ] 客戶資訊顯示
- [ ] Order Line 資訊顯示
- [ ] Order Line 轉療程單按鈕

#### E.2 療程執行
- [ ] 療程紀錄介面
- [ ] 新增耗材
- [ ] 耗材數量設定
- [ ] 「完成療程」按鈕

#### E.3 療程追蹤
- [ ] 未執行完療程列表
- [ ] 療程狀態管理
- [ ] 跨日/跨次療程支援

---

### F. 付款單（C_Payment）

#### F.1 收款功能
- [ ] 付款單列表
- [ ] 新增收款
- [ ] 客戶選擇
- [ ] 金額輸入
- [ ] 付款方式選擇
- [ ] 收款確認

---

### G. 採購訂單（C_Order）

#### G.1 採購開單
- [ ] 供應商列表
- [ ] 點選供應商顯示關聯商品
- [ ] 商品選擇
- [ ] 採購數量輸入
- [ ] 金額輸入
- [ ] 稅率設定（預設值）
- [ ] 入庫倉選擇
- [ ] 完成開單

---

### H. 收貨單（M_InOut）

#### H.1 收貨操作
- [ ] 未完成收貨採購單列表
- [ ] 收貨確認
- [ ] 收貨數量輸入
- [ ] 完成收貨

---

### I. 報表

#### I.1 庫存報表
- [ ] 期末庫存報表

#### I.2 客戶報表
- [ ] 總客戶數統計

#### I.3 收款報表
- [ ] 今日收款統計

#### I.4 客製化報表
- [ ] 報表框架設計
- [ ] 客製化資訊呈現（待定）

---

## 技術債與優化

### 已完成
- [x] 從原生 CSS 遷移到 daisyUI
- [x] 環境變數管理（.env）
- [x] API 基礎架構

### 待處理
- [ ] 錯誤處理統一化
- [ ] Loading 狀態統一管理
- [ ] 表單驗證框架
- [ ] 國際化（i18n）完整支援
- [ ] 單元測試
- [ ] E2E 測試

---

## 變更紀錄

| 日期 | 變更內容 |
|------|----------|
| 2026-01-14 | 新增預約編輯功能（點擊修改名稱/顏色/刪除） |
| 2026-01-14 | 新增直接點擊日曆預約功能 |
| 2026-01-14 | 新增過去時段 disabled 樣式與 cursor 指示 |
| 2026-01-14 | 新增 hover 時長預覽功能 |
| 2026-01-14 | 預約確認改為 Popup Modal |
| 2026-01-14 | 新增營業日過濾功能 |
| 2026-01-14 | 遷移至 daisyUI |
